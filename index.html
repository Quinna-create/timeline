<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vertical Shinsengumi Timeline</title>
    <script src="https://polyfill.io/v2/polyfill.min.js?features=IntersectionObserver"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: black;
            color: white;
            margin: 0;
            padding: 0;
        }
       
        .timeline-container {
            position: relative;
            width: 80%;
            margin: 50px auto;
            padding: 20px 0;
            max-height: 80vh; /* Set maximum height */
    overflow-y: auto; /* Ensure scrolling */
        }
    
             
        .vertical-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: white;
            transform: translateX(-50%);
        }

    .event {
    clear: both;
    overflow: visible;
    position: relative;
    margin: 30px 0;
    width: 45%;
    opacity: 0; /* Initially hidden */
    transform: translateX(100px); /* Slide in from the right */
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}
      
        
        .event.right {
    float: right;
    text-align: left;
    transform: translateX(100px); /* Slide in from the right */
       }

       .event.left {
    float: left;
    text-align: right;
    transform: translateX(-100px); /* Slide in from the left */
}

        .event.visible {
    opacity: 1; /* Make visible */
    transform: translateX(0); /* Slide into place */
}

       .event.hidden {
    opacity: 0;
    transform: translateX(50px); /* Slight movement when scrolling up */
}

.event.right.hidden {
    transform: translateX(-50px); /* Slide left when leaving view */
}

.event.left.hidden {
    transform: translateX(50px); /* Slide right when leaving view */
}
        
        .event-content {
    padding: 10px;
    background: #3a3a3a;
    border-radius: 10px;
    box-shadow: 3px 3px 6px rgba(255, 255, 255, 0.2);
    transition: box-shadow 0.3s ease, transform 0.3s ease;
 }

        .event:hover .event-content {
    box-shadow: 0px 0px 10px rgba(255, 255, 255, 0.5);
    transform: scale(1.05);
        }
        
        .event::before {
            content: '';
            position: absolute;
            top: 50%;
            width: 20px;
            height: 20px;
            background-color: white;
            border-radius: 50%;
            transform: translateY(-50%);
            z-index: 10;
        }

      .event.right::before {
    left: -10px; /* Connector to the vertical line */
}
      
    .event.left::before {
    right: -10px; /* Connector to the vertical line */
}

        .japanese-date {
            font-size: 24px;
            font-weight: bold;
            color: #d32f2f;
        }

        .western-year {
            font-size: 14px;
            color: #555;
            margin-bottom: 10px;
        }

        .description {
            font-size: 16px;
            line-height: 1.6;
        }

        .clearfix::after {
            content: '';
            display: table;
            clear: both;
        }
    </style>
</head>
<body>
  <div class="timeline-container">
    <div class="vertical-line"></div>
    <div class="timeline"></div>
</div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const timeline = document.querySelector(".timeline");
            if (!timeline) {
    console.error("Timeline container not found!");
    return;
}
            
            const events = [
                { japanese: "嘉永2", western: "1849", description: "Kondō Isami (16 years old) adopted by Shūsuke as heir to the Tennen Rishin sword fighting school" },
                { japanese: "文久1", western: "1861", description: "Stuff happens on this day (Chapter 6)" },
                { japanese: "文久2", western: "1862", description: "Hijikata Toshizō and everyone else joins Roshi Corps (Chapter 6)" },
                { japanese: "文久3", western: "1863", description: "Kondō purchases the 'Kotetsu' sword (Chapter 6)" },
                { japanese: "文久3", western: "1863", description: "Recruits from Edo meet each other at Dentsū temple (Chapter 2)" },
                { japanese: "文久3", western: "1863", description: "Hijikata first suspects Okita has TB (Chapter 11)" },
                { japanese: "文久3", western: "1863", description: "Shinsengumi officially inaugurated (Chapter 6)" },
                { japanese: "文久3", western: "1863", description: "Assassination of Kiyokawa Hachirō" },
                { japanese: "文久3", western: "1863", description: "Hamaguri Gate Incident (Chapter 8)" },
                { japanese: "文久3", western: "1863", description: "Serizawa incident with sumo wrestlers (Chapter 2)" },
                { japanese: "文久3", western: "1863", description: "Assassination of Serizawa (Chapter 2)" },
                { japanese: "文久3", western: "1863", description: "Fukamachi Shinsaku’s first kill (Chapter 3)" },
                { japanese: "文久3", western: "1863", description: "Takeda and Yamazaki Susumu join Shinsengumi (Chapters 4 and 5)" },
                { japanese: "元治1", western: "1864", description: "Yamazaki reports Masuya to Shinsengumi; Fukamachi Shinsaku killed and discovery of note leading to Ikedaya raid (Chapter 3); Ikedaya Incident (Chapters 4 & 8); organizational structure redrawn—corporal becomes sergeant" },
                { japanese: "元治1", western: "1864", description: "Choshu sympathizers forced out of Kyoto back to Choshu, overturning Choshu’s powerful position in the capital" },
                { japanese: "元治1", western: "1864", description: "Chrysanthemum festival, Shinsaku meets at Shikokuya Inn (Chapter 3)" },
                { japanese: "元治1", western: "1864", description: "Shinsaku kills for the first time in raid at Baishoin temple (Chapter 3)" },
                { japanese: "慶応1", western: "1865", description: "Shinsengumi moves headquarters from Mibu to Nishi Honganji; Sosaburo and Tashiro join the corps (Chapter 7)" },
                { japanese: "慶応1", western: "1865", description: "Yahei engages in personal fight, killing Sakura" },
                { japanese: "慶応1", western: "1865", description: "Shikanai’s child born (Chapter 8)" },
                { japanese: "慶応2", western: "1866", description: "Beginning of Chapter 8; Okubo and Ito secret meeting at Ichiriki cementing alliance before Ito’s departure from Shinsengumi" },
                { japanese: "慶応2", western: "1866", description: "Middle of 1st month, Ohayashi Hyogo arrives at headquarters" },
                { japanese: "慶応2", western: "1866", description: "Nakakura Shuzen discovered to have been attacked (Chapter 10)" },
                { japanese: "慶応2", western: "1866", description: "Tainoshin agrees to leave Shinsengumi with the Ito faction (Chapter 1)" },
                { japanese: "慶応2", western: "1866", description: "Tainoshin becomes involved in intra-party split (Chapter 1)" },
                { japanese: "慶応2", western: "1866", description: "Tani Saju*rō is defeated in combat (Chapter 12)" },
                { japanese: "慶応2", western: "1866", description: "Placard thrown into Kamo river with the notice board incident (Chapter 8)" },
                { japanese: "慶応2", western: "1866", description: "Ito broaches idea of splitting from corps with Kondo (Chapter 13)" },
                { japanese: "慶応2", western: "1866", description: "Takeda Kanryu*sai’s death (Chapter 5)" },
                { japanese: "慶応2", western: "1866", description: "Hirano Kazumi attacks Tomiyama Yahei by Yugyo temple on Shichijo Avenue" },
                { japanese: "慶応3", western: "1867", description: "Ito faction leaves for Choenji Temple (Chapter 1)" },
                { japanese: "慶応3", western: "1867", description: "Ito faction (along with Tainoshin) moved to Gesshin-in Temple (Chapter 1)" },
                { japanese: "慶応3", western: "1867", description: "Ito is assassinated at Aburanokoji (Chapter 1)" },
                { japanese: "慶応4", western: "1868", description: "Battle of Toba-Fushimi, after which the Shinsengumi is driven out of Kyoto" }
            ];

            // Sort events by year
    events.sort((a, b) => parseInt(a.western) - parseInt(b.western));

             const observer = new IntersectionObserver(
    (entries) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                entry.target.classList.add("visible");
                entry.target.classList.remove("hidden");
            } else {
                entry.target.classList.add("hidden");
                entry.target.classList.remove("visible");
            }
        });
    },
    { rootMargin: "200px", threshold: 0.1 } // Detect earlier for better sliding behavior
);
            //ents dynamically
    events.forEach((event, index) => {
        const eventDiv = document.createElement("div");
        eventDiv.className = `event ${index % 2 === 0 ? "left" : "right"}`; // Alternate left and right
        eventDiv.innerHTML = `
            <div class="event-content">
                <div class="japanese-date">${event.japanese}</div>
                <div class="western-year">${event.western}</div>
                <div class="description">${event.description}</div>
            </div>
        `;
        timeline.appendChild(eventDiv);

        // Observe the event for animations
        observer.observe(eventDiv);
    });
});
    </script>
</body>
</html>
